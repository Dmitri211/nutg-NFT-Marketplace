(this.webpackJsonpntf=this.webpackJsonpntf||[]).push([[14],{1103:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return I}));var a=c(193),n=c(21),s=c(20),i=c(10),r=c.n(i),l=c(0),o=c(25),d=c(32),j=c(192),b=c(58),m=c(196),u=c(195),O=c(779),h=(c(773),c(57)),p=c(28),v=c(67),f=c(142),x=(c(68),c(200)),N=c(190),g=(c(139),c(188)),y=c(770),w=c(771),k=c(84),C=c(1);var H=function(e){var t=Object(h.c)(),c=Object(b.m)().account,a=e.data,i=e.collection,o=(Object(v.a)(),Object(l.useState)(0)),d=Object(s.a)(o,2),H=(d[0],d[1],Object(u.b)()),S=Object(m.d)(H),A=Object(l.useState)(k.b),E=Object(s.a)(A,2),I=E[0],D=E[1],L=Object(g.a)(),_=Object(g.b)(null===a||void 0===a?void 0:a.contract);Object(l.useEffect)((function(){(null===a||void 0===a?void 0:a.contract.toLowerCase())===N.a.bnb.address.toLowerCase()?D(L):D(_)}));var B=Object(m.a)(null===a||void 0===a?void 0:a.contract),F=function(){var e=Object(n.a)(r.a.mark((function e(){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===a||void 0===a?void 0:a.price)>I&&O.b.error("Balance is small than the Price!",{position:"top-right",autoClose:3e3,theme:"dark",pauseOnHover:!1}),s=null===a||void 0===a?void 0:a.id,t({type:"CHANGE_LOAD",payload:!0}),e.prev=3,(null===a||void 0===a?void 0:a.contract.toLowerCase())!==N.a.bnb.address.toLowerCase()){e.next=9;break}return e.next=7,S.methods.buyTokenUsingBNB(i,s).send({from:c,value:a.price}).on("error",(function(e){O.b.error(e,{position:"top-right",autoClose:3e3,theme:"dark",pauseOnHover:!1}),t({type:"CHANGE_LOAD",payload:!1})})).on("transactionHash",(function(e){O.b.success(e,{position:"top-right",autoClose:3e3,theme:"dark",pauseOnHover:!1})})).on("receipt",function(){var e=Object(n.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.seller=c,t({type:p.a.UPDATE_ITEM,payload:a}),t({type:"CHANGE_LOAD",payload:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:e.next=14;break;case 9:return console.log(a.price),e.next=12,B.methods.approve(H,null===a||void 0===a?void 0:a.price).send({from:c});case 12:return e.next=14,S.methods.buyTokenUsingCoin(i,a.contract,s,null===a||void 0===a?void 0:a.price).send({from:c}).on("error",(function(e){O.b.error(e,{position:"top-right",autoClose:3e3,theme:"dark",pauseOnHover:!1}),t({type:"CHANGE_LOAD",payload:!1})})).on("transactionHash",(function(e){O.b.success(e,{position:"top-right",autoClose:3e3,theme:"dark",pauseOnHover:!1})})).on("receipt",function(){var e=Object(n.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.seller=c,t({type:p.a.UPDATE_ITEM,payload:a}),e.next=4,x.a.putSeller(null===a||void 0===a?void 0:a.creator,null===a||void 0===a?void 0:a.price);case 4:return e.next=6,x.a.putHistory(i,null===a||void 0===a?void 0:a.id,"Buy with ".concat(null===a||void 0===a?void 0:a.price," ").concat(Object(y.a)(null===a||void 0===a?void 0:a.token)," by ").concat(Object(j.a)(c)));case 6:t({type:"CHANGE_LOAD",payload:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0),t({type:"CHANGE_LOAD",payload:!1});case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{id:"BuyNow",className:"modal fade p-0",children:Object(C.jsx)("div",{className:"modal-dialog dialog-animated",children:Object(C.jsxs)("div",{className:"modal-content h-100",children:[Object(C.jsxs)("div",{className:"modal-header","data-dismiss":"modal",children:["Buy Item ",Object(C.jsx)("i",{className:"far fa-times-circle icon-close"})]}),Object(C.jsx)("div",{className:"menu modal-body",children:Object(C.jsxs)("div",{className:"row align-self-center",children:[Object(C.jsx)("div",{className:"col-12",children:Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("span",{style:{fontSize:"18px",fontWeight:900,fontFamily:"inherit"},className:" mt-0 mb-3",children:"Address : "}),Object(C.jsx)("span",{style:{fontSize:"18px",fontWeight:900,fontFamily:"inherit"},className:" mt-0 mb-3",children:c&&Object(j.a)(c)})]})}),Object(C.jsx)("div",{className:"col-12",children:Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("span",{style:{fontSize:"18px",fontWeight:900,fontFamily:"inherit"},className:" mt-0 mb-3",children:"Balalnce : "}),Object(C.jsxs)("span",{style:{fontSize:"18px",fontWeight:900,fontFamily:"inherit"},className:" mt-0 mb-3",children:[Object(f.a)(I,Object(w.a)(a.contract))," ",Object(y.a)(a.contract)]})]})}),Object(C.jsx)("div",{className:"col-12",children:Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("span",{style:{fontSize:"18px",fontWeight:900,fontFamily:"inherit"},className:" mt-0 mb-3",children:"You Will Pay : "}),Object(C.jsxs)("span",{style:{fontSize:"18px",fontWeight:900,fontFamily:"inherit"},className:" mt-0 mb-3",children:[a&&Object(f.a)(a.price,Object(w.a)(a.contract))," ",a&&Object(y.a)(a.contract)]})]})}),Object(C.jsx)("div",{className:"col-12",children:Object(C.jsx)("button",{className:"btn w-100 mt-3 mt-sm-4",type:"button",onClick:F,children:"Buy Now"})})]})})]})})})},S=c(61),A=c.n(S),E=function(){var e=Object(h.c)(),t=Object(b.m)().account,c=Object(o.g)(),a=c.collection,i=c.tokenId,p=Object(l.useState)(null),g=Object(s.a)(p,2),k=g[0],S=g[1],E=Object(l.useState)(!1),I=Object(s.a)(E,2),D=I[0],L=I[1],_=Object(l.useState)(!1),B=Object(s.a)(_,2),F=B[0],T=B[1],P=Object(l.useState)(!1),G=Object(s.a)(P,2),W=G[0],z=G[1],U=Object(l.useState)(!1),J=Object(s.a)(U,2),M=J[0],q=J[1],R=(Object(v.a)(),Object(l.useState)(0)),Y=Object(s.a)(R,2),K=Y[0],Q=Y[1],V=Object(l.useState)(0),X=Object(s.a)(V,2),Z=(X[0],X[1],Object(u.b)()),$=Object(m.d)(Z),ee=Object(l.useState)([]),te=Object(s.a)(ee,2),ce=te[0],ae=te[1],ne=Object(l.useState)(null),se=Object(s.a)(ne,2),ie=(se[0],se[1],Object(m.c)(a)),re=Object(l.useState)(N.a.Nutgain.address),le=Object(s.a)(re,2),oe=le[0];le[1];Object(l.useEffect)((function(){var e=function(){var e=Object(n.a)(r.a.mark((function e(){var t,c,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.methods.viewItemByCollectionAndTokenId(a,i).call();case 2:return t=e.sent,e.next=5,ie.methods.getTokenData(i).call();case 5:c=e.sent,n={id:c.id,status:t.status,price:t.itemInfo.price,seller:t.itemInfo.seller,contract:t.itemInfo.coin,uri:"https://ipfs.io/ipfs/".concat(c.uri),collection:a,name:c.name,description:c.description},S(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(l.useEffect)((function(){function e(){return(e=Object(n.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],null==k){e.next=8;break}return e.next=4,x.a.getHistory(a,k.id);case 4:e.sent.map((function(e){var c={id:e.id,tokenId:e.tokenId,collection:e.collection,content:e.content,createTime:e.created_at};t.push(c)})),console.log(t),ae(t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=setInterval((function(){!function(){e.apply(this,arguments)}()}),2e4);return function(){return clearInterval(t)}}),[k]);var de=function(){var c=Object(n.a)(r.a.mark((function c(){var n,s,l;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=null===k||void 0===k?void 0:k.id,console.log(K,k.contract),e({type:"CHANGE_LOAD",payload:!0}),c.prev=3,s=Object(w.a)(oe),l=Object(f.b)(new A.a(K),s),c.next=8,ie.methods.approve(Z,i).send({from:t});case 8:return c.next=10,$.methods.modifyItemOrder(a,n,l).send({from:t}).on("error",(function(t){O.b.error(t,{position:"top-right",autoClose:3e3,theme:"dark",pauseOnHover:!1}),e({type:"CHANGE_LOAD",payload:!1})})).on("transactionHash",(function(e){O.b.success(e,{position:"top-right",autoClose:3e3,theme:"dark",pauseOnHover:!1})})).on("receipt",(function(c){console.log(c),k.status=!0,k.price=K,x.a.putHistory(a,k.id,"put on sale with ".concat(K,"kaiECO by ").concat(Object(j.a)(t))),T(!1),q(!0),L(!1),z(!1),e({type:"CHANGE_LOAD",payload:!1})}));case 10:c.next=16;break;case 12:c.prev=12,c.t0=c.catch(3),console.log(c.t0),e({type:"CHANGE_LOAD",payload:!1});case 16:case"end":return c.stop()}}),c,null,[[3,12]])})));return function(){return c.apply(this,arguments)}}();return Object(C.jsxs)("section",{className:"item-details-area",children:[Object(C.jsx)("div",{id:"putOnSale",className:"modal fade p-0",children:Object(C.jsx)("div",{className:"modal-dialog dialog-animated",children:Object(C.jsxs)("div",{className:"modal-content h-100",children:[Object(C.jsxs)("div",{className:"modal-header","data-dismiss":"modal",children:["Put On Sale ",Object(C.jsx)("i",{className:"far fa-times-circle icon-close"})]}),Object(C.jsx)("div",{className:"menu modal-body",children:Object(C.jsxs)("div",{className:"row align-self-center",children:[Object(C.jsx)("div",{className:"col-8",children:Object(C.jsx)("div",{className:"form-group",children:Object(C.jsx)("input",{type:"number",className:"form-control",name:"name",placeholder:"Item Price",required:!0,onChange:function(e){return Q(parseFloat(e.target.value))}})})}),Object(C.jsx)("div",{className:"col-4",children:Object(C.jsx)("div",{className:"form-group",children:Object(C.jsx)("label",{className:"form-control",children:Object(y.a)(null===k||void 0===k?void 0:k.contract)})})}),Object(C.jsx)("div",{className:"col-12",children:Object(C.jsx)("button",{className:"btn w-100 mt-3 mt-sm-4",type:"button",onClick:de,children:"Put On Sale"})})]})})]})})}),k&&Object(C.jsx)(H,{data:k,collection:a}),Object(C.jsx)("div",{className:"container",children:Object(C.jsxs)("div",{className:"row justify-content-between",children:[Object(C.jsx)("div",{className:"col-12 col-lg-5",children:Object(C.jsxs)("div",{className:"item-info",children:[Object(C.jsx)("div",{className:"item-thumb text-center",children:Object(C.jsx)("img",{src:null===k||void 0===k?void 0:k.uri,alt:""})}),Object(C.jsxs)("ul",{className:"netstorm-tab nav nav-tabs",id:"nav-tab",children:[Object(C.jsx)("li",{children:Object(C.jsx)("a",{className:"active",id:"nav-profile-tab","data-toggle":"pill",href:"#nav-profile",children:Object(C.jsx)("h5",{className:"m-0",children:"History"})})}),Object(C.jsx)("li",{children:Object(C.jsx)("a",{id:"nav-contact-tab","data-toggle":"pill",href:"#nav-contact",children:Object(C.jsx)("h5",{className:"m-0",children:"Detail"})})})]}),Object(C.jsxs)("div",{className:"tab-content",id:"nav-tabContent",children:[Object(C.jsx)("div",{className:"tab-pane fade active show",id:"nav-profile",children:Object(C.jsx)("ul",{className:"list-unstyled",children:null===ce||void 0===ce?void 0:ce.map((function(e,t){return Object(C.jsxs)("li",{className:"single-tab-list d-flex align-items-center",children:[Object(C.jsx)("img",{className:"avatar-sm rounded-circle mr-3",src:"/img/user.jpg",alt:""}),Object(C.jsxs)("p",{className:"m-0",children:[e.content,Object(C.jsx)("br",{}),e.createTime]})]},"tdt_".concat(t))}))})}),Object(C.jsx)("div",{className:"tab-pane fade",id:"nav-contact",children:Object(C.jsxs)("div",{className:"owner-meta d-flex align-items-center mt-3",children:[Object(C.jsx)("span",{children:"Owner"}),Object(C.jsxs)(d.b,{className:"owner d-flex align-items-center ml-2",to:"/author",children:[Object(C.jsx)("img",{className:"avatar-sm rounded-circle",src:"/img/user.jpg",alt:""}),Object(C.jsx)("h6",{className:"ml-2",children:k&&Object(j.a)(null===k||void 0===k?void 0:k.seller)})]})]})})]})]})}),Object(C.jsx)("div",{className:"col-12 col-lg-6",children:Object(C.jsxs)("div",{className:"content mt-5 mt-lg-0",children:[Object(C.jsx)("h3",{className:"m-0",children:null===k||void 0===k?void 0:k.name}),Object(C.jsx)("p",{children:null===k||void 0===k?void 0:k.description}),Object(C.jsxs)("div",{className:"owner d-flex align-items-center",children:[Object(C.jsx)("span",{children:"Owned By"}),Object(C.jsxs)("a",{className:"owner-meta d-flex align-items-center ml-3",href:"/author",children:[Object(C.jsx)("img",{className:"avatar-sm rounded-circle",src:"/img/user.jpg",alt:""}),Object(C.jsx)("h6",{className:"ml-2",children:k&&Object(j.a)(null===k||void 0===k?void 0:k.seller)})]})]}),Object(C.jsx)("div",{className:"item-info-list mt-4",children:Object(C.jsx)("ul",{className:"list-unstyled",children:Object(C.jsx)("li",{className:"price d-flex justify-content-between",children:Object(C.jsxs)("span",{children:["Current Price ",k&&Object(f.a)(null===k||void 0===k?void 0:k.price,Object(w.a)(null===k||void 0===k?void 0:k.contract))," ",k&&Object(y.a)(null===k||void 0===k?void 0:k.contract)]})})})}),Object(C.jsxs)("div",{className:"row items",children:[Object(C.jsx)("div",{className:"col-12 col-md-6 item px-lg-2",children:Object(C.jsx)("div",{className:"card no-hover",children:Object(C.jsx)("div",{className:"single-seller d-flex align-items-center",children:Object(C.jsxs)("div",{className:"seller-info ml-3",children:[Object(C.jsx)(d.b,{className:"seller mb-2",to:"/user/".concat(null===k||void 0===k?void 0:k.seller),children:k&&Object(j.a)(null===k||void 0===k?void 0:k.seller)}),Object(C.jsx)("span",{children:"Seller"})]})})})}),Object(C.jsx)("div",{className:"col-12 col-md-6 item px-lg-2",children:Object(C.jsx)("div",{className:"card no-hover",children:Object(C.jsx)("div",{className:"single-seller d-flex align-items-center",children:Object(C.jsxs)("div",{className:"seller-info ml-3",children:[Object(C.jsx)(d.b,{className:"seller mb-2",to:"/collection/".concat(null===k||void 0===k?void 0:k.contract),children:k&&Object(j.a)(null===k||void 0===k?void 0:k.contract)}),Object(C.jsx)("span",{children:"Collection"})]})})})})]}),Object(C.jsxs)("div",{className:"row",children:[M&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{className:"col-12",children:Object(C.jsx)(d.b,{className:"d-block btn btn-bordered-white mt-4",to:"#",onClick:function(){return function(){var e=null===k||void 0===k?void 0:k.id;null!=e&&(console.log($),$.methods.cancelItemOrder(a,e).send({from:t}).on("transactionHash",(function(e){O.b.success(e,{position:"top-right",autoClose:3e3,theme:"dark",pauseOnHover:!1})})).on("error",(function(e){O.b.info(e,{position:"top-right",autoClose:3e3,theme:"dark",pauseOnHover:!1})})).on("receipt",function(){var e=Object(n.a)(r.a.mark((function e(c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.putHistory(a,k.id,"remove by ".concat(Object(j.a)(t)));case 2:T(!1),q(!1),L(!0),z(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}()},children:"Remove from Sale"})})}),D&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{className:"col-12",children:Object(C.jsx)("a",{className:"d-block btn btn-bordered-white mt-4",href:"/#","data-toggle":"modal","data-target":"#putOnSale",children:"Put on Sale"})})}),F&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"col-6",children:Object(C.jsx)("a",{className:"d-block btn btn-bordered-white mt-4",href:"/#","data-toggle":"modal","data-target":"#PlaceOnBid",children:"Transfer"})}),Object(C.jsx)("div",{className:"col-6",children:Object(C.jsx)("a",{className:"d-block btn btn-bordered-white mt-4",href:"/wallet-connect",children:"Share"})})]}),W&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{className:"col-12",children:Object(C.jsx)("a",{className:"d-block btn btn-bordered-white mt-4",href:"/#","data-toggle":"modal","data-target":"#BuyNow",children:"Buy Now"})})})]})]})})]})}),Object(C.jsx)(O.a,{})]})};var I=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(a.a,{title:"Token Detail",subpage:"Pages",page:"Login"}),Object(C.jsx)(E,{})]})}},770:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var a=c(190),n=function(e){return a.a.busd.address===e?a.a.busd.symbol:a.a.Nutgain.address===e?a.a.Nutgain.symbol:a.a.bnb.symbol}},771:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var a=c(190),n=function(e){return a.a.busd.address===e?a.a.busd.decimal:a.a.Nutgain.address===e?a.a.Nutgain.decimal:a.a.bnb.decimal}}}]);
//# sourceMappingURL=14.3f9225ef.chunk.js.map